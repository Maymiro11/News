import{a as d}from"./assets/vendor-0cb09735.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const c={targetElem:document.querySelector(".js-target"),formElem:document.querySelector(".js-search-form"),articleListElem:document.querySelector(".js-article-list"),loaderElem:document.querySelector(".js-loader")};let l="Elon Musk",i=1,m=0;const v=25;async function p(){const r="https://free-news.p.rapidapi.com/v1/search",a={headers:{"x-rapidapi-host":"free-news.p.rapidapi.com","x-rapidapi-key":"9b3ff61931msh1b42d77d34e33dap1c29cajsn3d3169e0e2f4"},params:{q:l,page:i,page_size:v}};return(await d.get(r,a)).data}c.formElem.addEventListener("submit",b);async function b(o){if(o.preventDefault(),l=o.target.elements.query.value.trim(),!l)return;y(),i=1,c.articleListElem.innerHTML="";const t=await p();m=t.total_pages,f(t.articles),g(),h(),console.log(`Загальна кількість елементів: ${t.articles.length}`)}function $({author:o,title:t,summary:r,media:a,published_date:e}){return`<li class="card news-card"> 
            <img loading="lazy" class="news-image" src="${a}" alt="${t}" /> 
            <h3 class="card-title"> ${t} </h3> 
            <p class="card-desc"> ${r} </p> 
            <div class="card-footer"> <span>${o}</span> <span>${e}</span> </div> 
        </li>`}function f(o){const t=o.map($).join("");c.articleListElem.insertAdjacentHTML("beforeend",t)}async function P(){i+=1,y();const o=await p();f(o.articles),g(),h(),window.scrollBy({top:578,behavior:"smooth"})}function g(){i>=m?(u.unobserve(c.targetElem),console.log("The end!")):u.observe(c.targetElem)}const N=function(o,t){o.forEach(r=>{r.isIntersecting&&P()})},u=new IntersectionObserver(N);function y(){c.loaderElem.classList.remove("hidden")}function h(){c.loaderElem.classList.add("hidden")}function w(){const o=document.getElementById("datetime"),t=new Date;o.textContent=t.toLocaleString("uk-UA")}setInterval(w,6e4);window.onload=function(){w()};async function O(o,t){const a=`http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=lBp7LWFNtxgQl7GMexTziOoDiH4llbEN&q=${o},${t}`;try{const e=await d.get(a);if(e.data&&e.data.Key)return e.data.Key;throw new Error("Не вдалося отримати ключ розташування")}catch(e){return console.error("Помилка отримання ключа розташування:",e),null}}function x(){return new Promise((o,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{const{latitude:a,longitude:e}=r.coords;o({latitude:a,longitude:e})},r=>{t("Помилка отримання геолокації")}):t("Геолокація не підтримується вашим браузером")})}async function S(){const o="lBp7LWFNtxgQl7GMexTziOoDiH4llbEN",t=document.getElementById("weather");try{const{latitude:r,longitude:a}=await x(),n=`http://dataservice.accuweather.com/currentconditions/v1/${await O(r,a)}?apikey=${o}`,s=await d.get(n),E=s.data[0].LocalizedName,L=s.data.temperature,q=s.data.description;t.textContent=`Погода у місті ${E}: ${L}°C, ${weatherText}`}catch(r){console.error("Помилка отримання погоди:",r),t.textContent="Погода: неможливо отримати дані"}}S();
//# sourceMappingURL=commonHelpers.js.map
