{"version":3,"file":"commonHelpers.js","sources":["../src/main.js","../src/js/header.js"],"sourcesContent":["import axios from 'axios';\n\nconst refs = {\n    targetElem: document.querySelector('.js-target'),\n    formElem: document.querySelector('.js-search-form'),\n    articleListElem: document.querySelector('.js-article-list'),\n    loaderElem: document.querySelector('.js-loader'),\n  };\n\n  let query = 'Elon Musk';\n  let currentPage = 1;\n  let totalPages = 0;\n  const PAGE_SIZE = 25;\n  \n  //запрос\n  async function getArticles() {\n    const BASE_URL = 'https://free-news.p.rapidapi.com/v1';\n    const END_POINT = '/search';\n    const url = `${BASE_URL}${END_POINT}`;\n  \n    const options = {\n      headers: {\n        'x-rapidapi-host': 'free-news.p.rapidapi.com',\n        'x-rapidapi-key': '9b3ff61931msh1b42d77d34e33dap1c29cajsn3d3169e0e2f4',\n      },\n      params: {\n        q: query,\n        page: currentPage,\n        page_size: PAGE_SIZE,\n      },\n    };\n  \n    const res = await axios.get(url, options);\n    return res.data;\n  }\n\n//прослуховувач на сабміт\nrefs.formElem.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    query = e.target.elements.query.value.trim();\n    if (!query) return;\n    showLoader();\n\n    currentPage = 1;\n    refs.articleListElem.innerHTML = '';\n\n    const data = await getArticles();\n    totalPages = data.total_pages;\n    renderArticles(data.articles);\n    updateStatusObserver();\n    hideLoader();\n    console.log(`Загальна кількість елементів: ${data.articles.length}`);\n}\n//створення розмітки\nfunction templateArticle({ author, title, summary, media, published_date }){\nreturn `<li class=\"card news-card\"> \n            <img loading=\"lazy\" class=\"news-image\" src=\"${media}\" alt=\"${title}\" /> \n            <h3 class=\"card-title\"> ${title} </h3> \n            <p class=\"card-desc\"> ${summary} </p> \n            <div class=\"card-footer\"> <span>${author}</span> <span>${published_date}</span> </div> \n        </li>`;\n}\n\n//рендер карток\nfunction renderArticles(arr){\n    const markup = arr.map(templateArticle).join('');\n    refs.articleListElem.insertAdjacentHTML('beforeend', markup);\n}\n\n//кнопка лоадер\nasync function loadMore() {\n    currentPage += 1;\n    showLoader();\n    const data = await getArticles();\n    renderArticles(data.articles);\n    updateStatusObserver();\n\nhideLoader();\nwindow.scrollBy({\n    top: 578,\n    behavior: 'smooth',\n});\n}\n\n  function updateStatusObserver() {\n    const isLastPage = currentPage >= totalPages;\n    if (isLastPage) {\n      observer.unobserve(refs.targetElem);\n      console.log('The end!');\n    } else { \n      observer.observe(refs.targetElem);\n    }\n  }\n  \n  const callback = function (entries, observer) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        loadMore();\n      }\n    });\n  };\n  \n  const observer = new IntersectionObserver(callback);\n  \n  // =====================================\n  \n  function showLoader() {\n    refs.loaderElem.classList.remove('hidden');\n  }\n  \n  function hideLoader() {\n    refs.loaderElem.classList.add('hidden');\n  }","import axios from 'axios';\n\nfunction updateDateTime() {\n    const datetimeElem = document.getElementById('datetime');\n    const now = new Date();\n    datetimeElem.textContent = now.toLocaleString('uk-UA');\n}\n\nsetInterval(updateDateTime, 60000); // Оновлення кожну хвилину\n\nwindow.onload = function() {\n    updateDateTime();\n};\n/*------------------------------------------------------------*/\n            //про всяк випадок))\n            //'X-RapidAPI-Key': 'lBp7LWFNtxgQl7GMexTziOoDiH4llbEN',\n            //'X-RapidAPI-Host': 'AccuWeatherstefan-skliarovV1.p.rapidapi.com'\n/*___________________________________________________________*/\n\nconst apiKey = 'lBp7LWFNtxgQl7GMexTziOoDiH4llbEN';\n\nasync function getLocationKey(latitude, longitude) {\n    const apiKey = 'lBp7LWFNtxgQl7GMexTziOoDiH4llbEN';\n    const url = `http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=${apiKey}&q=${latitude},${longitude}`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.data && response.data.Key) {\n            return response.data.Key;\n        } else {\n            throw new Error('Не вдалося отримати ключ розташування');\n        }\n    } catch (error) {\n        console.error('Помилка отримання ключа розташування:', error);\n        return null;\n    }\n}\n\n// Отримання геолокації користувача\nfunction getUserLocation() {\n    return new Promise((resolve, reject) => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(\n                position => {\n                    const { latitude, longitude } = position.coords;\n                    resolve({ latitude, longitude });\n                },\n                error => {\n                    reject('Помилка отримання геолокації');\n                }\n            );\n        } else {\n            reject('Геолокація не підтримується вашим браузером');\n        }\n    });\n}\n\n// Отримання і відображення погоди\nasync function updateWeather() {\n    const apiKey = 'lBp7LWFNtxgQl7GMexTziOoDiH4llbEN';\n    const weatherElem = document.getElementById('weather');\n    try {\n        // Отримання геолокації користувача\n        const { latitude, longitude } = await getUserLocation();\n        \n        // Отримання ключа розташування за координатами\n        const locationKey = await getLocationKey(latitude, longitude);\n\n        // Запит погоди за отриманим ключем розташування\n        const weatherUrl = `http://dataservice.accuweather.com/currentconditions/v1/${locationKey}?apikey=${apiKey}`;\n        const response = await axios.get(weatherUrl);\n\n        // Відображення погодних даних на сторінці\n        const city = response.data[0].LocalizedName;\n        const temperature = response.data.temperature;\n        const description = response.data.description;\n\n        weatherElem.textContent = `Погода у місті ${city}: ${temperature}°C, ${weatherText}`;\n    } catch (error) {\n        console.error('Помилка отримання погоди:', error);\n        weatherElem.textContent = 'Погода: неможливо отримати дані';\n    }\n}\n\n// Виклик функції оновлення погоди при завантаженні сторінки\nupdateWeather();"],"names":["refs","query","currentPage","totalPages","PAGE_SIZE","getArticles","url","options","axios","onFormSubmit","e","showLoader","data","renderArticles","updateStatusObserver","hideLoader","templateArticle","author","title","summary","media","published_date","arr","markup","loadMore","observer","callback","entries","entry","updateDateTime","datetimeElem","now","getLocationKey","latitude","longitude","response","error","getUserLocation","resolve","reject","position","updateWeather","apiKey","weatherElem","weatherUrl","city","temperature","description"],"mappings":"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"}